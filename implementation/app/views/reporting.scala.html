@import org.pac4j.core.profile.CommonProfile

@(profile: CommonProfile, report: Report)

@main(Messages("views.report.title")) {

    @navigation(Messages("views.report.title"), profile) {

        <table class="striped responsive-table">
            <thead>
                <tr>
                    <th data-field="id">@Messages("views.report.username")</th>
                    <th data-field="price">@Messages("views.report.usedholiday")</th>
                    <th data-field="price">@Messages("views.report.unusedholiday")</th>
                    <th data-field="price">@Messages("views.report.sickdays")</th>
                    <th data-field="price">@Messages("views.report.workshould")</th>
                    <th data-field="price">@Messages("views.report.workis")</th>
                    <th data-field="price">@Messages("views.report.break")</th>
                    <th data-field="price">@Messages("views.report.difference")</th>
                </tr>
            </thead>
            <tbody>

                    <!-- User reports -->
                @for(userReport <- report.getUserReports) {
                    <tr>
                        <td>@userReport.getUser.getLastName @userReport.getUser.getFirstName</td>
                        <td>@userReport.getNumOfUsedHolidays</td>
                        <td>@userReport.getNumOfUnusedHolidays</td>
                        <td>@userReport.getNumOfSickDays</td>
                        <td>@(userReport.getWorkMinutesShould() / 60)</td>
                        <td>@(userReport.getWorkMinutesIs() / 60)</td>
                        <td>@(userReport.getBreakMinutes())</td>
                        @if(userReport.getWorkMinutesDifference < 0) {
                            <td style="color: darkred"><b>@(userReport.getWorkMinutesDifference() / 60)</b></td>
                        } else {
                            <td style="color: darkgreen"><b>@(userReport.getWorkMinutesDifference() / 60)</b></td>
                        }
                    </tr>
                }

                    <!-- If there is only 1 entry, we don't need a summary...-->
                @if(report.getUserReports().size() > 1) {
                    <!-- Summary -->
                <tr>
                    <td class="result">SUMMARY</td>
                    <td class="result">@report.getSummary().getNumOfUsedHolidays</td>
                    <td class="result">@report.getSummary().getNumOfUnusedHolidays</td>
                    <td class="result">@report.getSummary().getNumOfSickDays</td>
                    <td class="result">@(report.getSummary().getWorkMinutesShould() / 60)</td>
                    <td class="result">@(report.getSummary().getWorkMinutesIs() / 60)</td>
                    <td class="result">@(report.getSummary().getBreakMinutes())</td>
                    <td class="result">@(report.getSummary().getWorkMinutesDifference() / 60)</td>
                </tr>
            }
            </tbody>
        </table>

        @if(report.getUserReports().size() <= 1) {
            <div class="row">

                <button data-target="modal-request-overtime-payout" class="col btn modal-trigger secondary-btn l4 s12">
                    @Messages("views.report.request.overtimepayout")
                    <i class="material-icons right">monetization_on</i>
                </button>

                <button data-target="modal-request-holiday-payout" class="col btn modal-trigger secondary-btn offset-l4 l4 s12">
                    @Messages("views.report.request.holidaypayout")
                    <i class="material-icons right">monetization_on</i>
                </button>

            </div>
        }

        <div id="modal-request-holiday-payout" class="modal">
                <!-- header of modal -->
            <header class="modal-content">
                <h4>@Messages("views.report.request.holidaypayout")</h4>
            </header>

            <form action="@routes.ReportingController.requestHolidayPayout()" method="POST">
                    <!-- Content of modal -->
                <div class="modal-content">

                    <div class="row">
                        <div class="input-field col s6 m5">
                            <input name="numofhours" required="required" type="text">
                            <label for="numofhours">@Messages("views.report.request.days")</label>
                        </div>
                        <div class="input-field col s6 m5">
                            <input name="comment" required="required" type="text">
                            <label for="comment">@Messages("views.report.request.comment")</label>
                        </div>
                    </div>
                </div>

                    <!-- Modal footer -->
                <footer class="modal-footer">
                    <button class="waves-effect modal-action modal-close waves-light btn left secondary-btn" name="action">
                        @Messages("views.btn.close")
                    </button>

                    <button class="waves-effect modal-close waves-light btn right primary-btn" type="submit">
                        @Messages("views.btn.request")
                        <i class="material-icons right">add</i>
                    </button>

                </footer>
            </form>
        </div>

        <div id="modal-request-overtime-payout" class="modal">
                <!-- header of modal -->
            <header class="modal-content">
                <h4>@Messages("views.report.request.overtimepayout")</h4>
            </header>

            <form action="@routes.ReportingController.requestOvertimePayout()" method="POST">
                    <!-- Content of modal -->
                <div class="modal-content">

                    <div class="row">
                        <div class="input-field col s6 m5">
                            <input name="numofhours" required="required" type="text">
                            <label for="numofhours">@Messages("views.report.request.hours")</label>
                        </div>
                        <div class="input-field col s6 m5">
                            <input name="comment" required="required" type="text">
                            <label for="comment">@Messages("views.report.request.comment")</label>
                        </div>
                    </div>
                </div>

                    <!-- Modal footer -->
                <footer class="modal-footer">
                    <button class="waves-effect modal-action modal-close waves-light btn left secondary-btn" name="action">
                        @Messages("views.btn.close")
                    </button>

                    <button class="waves-effect modal-close waves-light btn right primary-btn" type="submit">
                        @Messages("views.btn.request")
                        <i class="material-icons right">add</i>
                    </button>

                </footer>
            </form>
        </div>
    }
}