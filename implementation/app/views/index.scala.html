@import org.pac4j.core.profile.CommonProfile

@import business.timetracking.TimeTrackState
@(profile: CommonProfile, userState: TimeTrackState, progress: Int, timeTracks: java.util.List[TimeTrack])

@main(Messages("views.index.title")) {

    @navigation(Messages("views.index.title"), profile) {

        <div id = "index-welcome-status">
            <h3>@(Messages("views.index.welcomeMessage") + " : " + profile.getUsername)</h3>

            <h4>@(Messages("views.index.state") + " : " + userState)</h4>
        </div>

        <br/>
        <div id="active_progress" class="progress">
            <div class="determinate green" style="width : @(progress)%"></div>
        </div>

        @if(userState == TimeTrackState.INACTIVE) {
            <div id="index-time-track-buttons">
                <a class="waves-effect waves-light btn secondary-btn" href="@routes.TimeTrackController.come()" style="float : left"> @Messages("views.index.come")</a>
                <button class="waves-effect waves-light btn secondary-btn" disabled="disabled">@Messages("views.index.startbreak")</button>
                <button class="waves-effect waves-light btn secondary-btn" disabled="disabled" style="float : right">@Messages("views.index.go")</button>
            </div>
        }

        @if(userState == TimeTrackState.ACTIVE) {
            <div id="index-time-track-buttons">
                <button class="waves-effect waves-light btn secondary-btn" disabled="disabled" style="float : left"> @Messages("views.index.come")</button>
                <a class="waves-effect waves-light btn secondary-btn" href="@routes.TimeTrackController.pause()">@Messages("views.index.startbreak")</a>
                <a class="waves-effect waves-light btn secondary-btn" href="@routes.TimeTrackController.go()" style="float : right">@Messages("views.index.go")</a>
            </div>
        }

        @if(userState == TimeTrackState.PAUSE) {
            <div id="index-time-track-buttons">
                <button class="waves-effect waves-light btn secondary-btn" disabled="disabled" style="float : left"> @Messages("views.index.come")</button>
                <a class="waves-effect waves-light btn secondary-btn" href="@routes.TimeTrackController.pause()">@Messages("views.index.stopbreak")</a>
                <button class="waves-effect waves-light btn secondary-btn" disabled="disabled" style="float : right">@Messages("views.index.go")</button>
            </div>
        }

        <br />
        <br />



        @if(!timeTracks.isEmpty) {
            <table>
                <tr>
                    <th>
                        @Messages("views.index.timetrack.tablehead.action")
                    </th>
                    <th>
                        @Messages("views.index.timetrack.tablehead.time")
                    </th>
                </tr>
                @for(timeTrack: TimeTrack <- timeTracks) {
                    <tr>
                        <td>
                            @Messages("views.index.timetrack.tablebody.start")
                        </td>
                        <td>
                            @(timeTrack.getFrom.getHourOfDay + ":" + timeTrack.getFrom.getMinuteOfHour + ":" + timeTrack.getFrom().getSecondOfMinute)
                        </td>
                    </tr>

                    @for(b: Break <- timeTrack.getBreaks) {
                        <tr>
                            <td>
                                @Messages("views.index.timetrack.tablebody.breakstart")
                            </td>
                            <td>
                                @(b.getFrom.getHourOfDay + ":" + b.getFrom.getMinuteOfHour + ":" + b.getFrom.getSecondOfMinute)
                            </td>
                        </tr>

                        @if(b.getTo() != null) {
                            <tr>
                                <td>
                                    @Messages("views.index.timetrack.tablebody.breakend")
                                </td>
                                <td>
                                    @(b.getTo.getHourOfDay + ":" + b.getTo.getMinuteOfHour + ":" + b.getTo.getSecondOfMinute)
                                </td>
                            </tr>
                        }
                    }

                    @if(timeTrack.getTo() != null) {
                        <tr>
                            <td>
                                @Messages("views.index.timetrack.tablebody.end")
                            </td>
                            <td>
                                @(timeTrack.getTo().getHourOfDay + ":" + timeTrack.getTo().getMinuteOfHour + ":" + timeTrack.getTo().getSecondOfMinute)
                            </td>
                        </tr>
                    }

                }
            </table>

        }

        <input id='timepicker' type='text'name='timepicker'/>

    }

}
